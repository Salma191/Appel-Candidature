<app-sidebar></app-sidebar>
<app-table>
  <div class="w-full mx-auto p-6 bg-white shadow-lg rounded-2xl border border-gray-200 mt-16 mb-16">
    <h1 class="text-2xl font-bold text-gray-800 mb-6">üìÅ Archivage</h1>

    <div *ngFor="let item of items; let i = index" class="mb-4">
      <button (click)="toggleDropdown(i)"
              class="flex justify-between items-center w-full rounded-xl border border-gray-300 shadow px-4 py-3 bg-gray-50 text-base font-semibold text-gray-800 hover:bg-gray-100">
        üìÇ {{ item.label }}
        <svg class="w-5 h-5 transform transition-transform duration-300"
             [ngClass]="{ 'rotate-180': item.isOpen }" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" clip-rule="evenodd"
                d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z"/>
        </svg>
      </button>

      <div *ngIf="item.isOpen" class="mt-2 p-4 bg-white border border-gray-200 rounded-xl shadow-sm">
        <!-- PVs Archiv√©s -->
        <ng-container *ngIf="item.label === 'PVs Archiv√©s'">
          <div *ngIf="item.pvs && item.pvs.length > 0; else emptyPVs">
            <div *ngFor="let pv of item.pvs" class="p-3 border border-gray-200 rounded-lg mb-2 bg-gray-50">
              <div class="font-semibold text-gray-700">{{ pv.titre }}</div>
              <div class="text-sm text-gray-500">Cr√©√© le : {{ pv.dateCreation | date:'longDate' }}</div>
            </div>
          </div>
          <ng-template #emptyPVs>
            <div class="text-gray-500 italic">Aucun PV archiv√© pour le moment.</div>
          </ng-template>
        </ng-container>

        <!-- D√©cisions Archiv√©es -->
        <ng-container *ngIf="item.label === 'D√©cisions Archiv√©es'">
          <div *ngIf="item.decisions && item.decisions.length > 0; else emptyDecisions">
            <div *ngFor="let decision of item.decisions" class="p-3 border border-gray-200 rounded-lg mb-2 bg-gray-50">
              <div class="font-semibold text-gray-700">{{ decision.intitule }}</div>
              <div class="text-sm text-gray-500">Date de signature : {{ decision.dateSignature | date:'longDate' }}</div>
            </div>
          </div>
          <ng-template #emptyDecisions>
            <div class="text-gray-500 italic">Aucune d√©cision archiv√©e pour le moment.</div>
          </ng-template>
        </ng-container>
      </div>
    </div>
  </div>
</app-table>
