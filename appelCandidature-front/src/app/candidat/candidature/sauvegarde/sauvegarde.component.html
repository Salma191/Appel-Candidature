<app-sidebar></app-sidebar>

<app-table>
  <h2 class="text-2xl font-semibold mb-6">📌 Postes enregistrés à postuler</h2>

  <div *ngIf="postesEnregistres.length === 0" class="text-gray-500">
    Vous n'avez encore enregistré aucun poste.
  </div>

  <div *ngFor="let poste of postesEnregistres" class="bg-white rounded-2xl shadow p-5 mb-4 transition-all duration-300 border border-gray-200">
    <div class="flex justify-between items-center cursor-pointer" (click)="poste.isOpen = !poste.isOpen">
      <div>
        <p class="text-lg font-semibold">📌 {{ poste.poste.description }}</p>
        <p class="text-sm text-gray-500">📍 Affectation : {{ poste.affectation }}</p>
        <p class="text-sm text-gray-500">🔍 Type de poste : {{ poste.poste.typePoste.nom }}</p>
      </div>

      <div>
        <button class="text-sm text-red-500 hover:underline" (click)="supprimer(poste.id)">
          ❌ Retirer
        </button>
      </div>
    </div>

    <div *ngIf="poste.isOpen" class="mt-4 text-sm text-gray-600">
      <p><strong>Description :</strong> {{ poste.description }}</p>
      <p><strong>Date d'enregistrement :</strong> {{ poste.dateAjout | date:'longDate' }}</p>

      <button (click)="postuler(poste.id)" class="mt-2 inline-block px-4 py-2 text-sm bg-blue-600 text-white rounded hover:bg-blue-700 transition">
        🔘 Postuler maintenant
      </button>
    </div>
  </div>
</app-table>
